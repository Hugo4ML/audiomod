<!DOCTYPE html>
<html>
  <head>
    <title>"Loop audio file(7)"</title>
  </head>
  <body>
    <input type = "file" id = "file">
    <button onclick='window.document.getElementById("header1").innerHTML = "loopAudio call state";'>Reset header</button>
    <button onclick='loopAudio();'>Concat audio!</button>
    <h1 id = 'header1'>Header</h1>
    <h2 id = 'header2'>Header</h2>
    <script>
      window.document.getElementById("header1").innerHTML = "loopAudio call state"
      function loopAudio() {
        /*
        Generates new audio by concatenating original to itself until it passes the specified lenght in time.
        */
        window.document.getElementById("header1").innerHTML = "loopAudio called"; //Confirms function call.
        const file = window.document.getElementById("file").files[0];
        window.document.getElementById("header1").innerHTML = "loopAudio line 20 passed"; //Confirms function has reached a certain point.
        const fileReader = new FileReader();
        fileReader.readAsText(file);
        window.document.getElementById("header1").innerHTML = "loopAudio line 21 passed"; //Confirms function has reached a certain point.
        const content = fileReader.result;
        window.document.getElementById("header1").innerHTML = "loopAudio line 24 passed"; //Confirms function has reached a certain point.
        /*let blob = new Blob(content);
        window.document.getElementById("header1").innerHTML = "loopAudio line 26 passed"; //Confirms function has reached a certain point.
        const url = URL.createObjectURL(blob);
        window.document.getElementById("header1").innerHTML = "loopAudio line 28 passed"; //Confirms function has reached a certain point.
        const audio = new Audio(url);
        window.document.getElementById("header1").innerHTML = "loopAudio line 30 passed"; //Confirms function has reached a certain point.
        audio.play();*/
        window.document.getElementById("header1").innerHTML = content;
        window.document.getElementById("header2").innerHTML = "Pending request"; //Confirms function call.
        window.document.getElementById("header1").innerHTML = "loopAudio completed"; //Confirms function completion.
      }
    </script>
  </body>
</html>
