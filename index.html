<!DOCTYPE html>
<html>
  <head>
    <title>Loop audio file</title>
  </head>
  <body>
    <input type = "file" id = "file"></input>
    <button onclick='loopAudio();'>Concat audio!</button>
    <script>
      async function loopAudio() {
        /*
        Generates new audio by concatenating original to itself until it passes the specified lenght in time.
        */
        const file = window.document.getElementById("file").files[0], name = file.name, extension = name.substring(name.lastIndexOf('.') + 1, name.length) || name;
        const fileReader = new FileReader();
        fileReader.onload = (event) => {
          /*
          Read file audio data.
          */
          let audio = new Audio();
          audio.onloadedmetadata = () => {
            /*
            Generate new audio from file information.
            */
            const data = new Array(((12.5 * 3600) / audio.duration) - (((12.5 * 3600) / audio.duration) % 1) + 1);
            for(let index = 0; index < data.length; ++index) data[index] = event.target.result;
            let blob = new Blob(data, {type: "audio/" + extension});
            //Download blob.
            let link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = "(12,5hrs)" + name;
            link.click();
          }
          audio.src = URL.createObjectURL(file);
        }
        fileReader.readAsArrayBuffer(file);
      }
    </script>
  </body>
</html>
